<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <title>ELX</title>
  <!-- MDB icon -->
  <link rel="icon" href="images/favicon.ico" type="image/x-icon" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="css/all.css" />
  <!-- MDB -->
  <link rel="stylesheet" href="css/mdb.min.css" />
  <link rel="stylesheet" href="fonts/font.css" />
  <link rel="stylesheet" href="css/style.css" />
  <link href="css/aos.css" rel="stylesheet">
  <link href="css/owl.carousel.min.css" rel="stylesheet">
  <link rel="stylesheet" href="path/to/owl.carousel.min.css">
  <link rel="stylesheet" href="path/to/owl.theme.default.min.css">
  <script src="path/to/jquery.min.js"></script>
  <script src="path/to/owl.carousel.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <script src="js/masonry.pkgd.min.js"></script>
  <script type="text/javascript" src="js/mdb.min.js"></script>
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/custom.js"></script>
  <script src="js/owl.carousel.js"></script>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

  <!-- flatpickr CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

  <!-- flatpickr JS -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Owl Carousel CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">

  <!-- Owl Carousel JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>


  <script>
    // Your web app's Firebase configuration
    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDhhHH2tK4y5oB9__yqJd_3yFUyy7ls5CM",
      authDomain: "elxproperties.firebaseapp.com",
      databaseURL: "https://elxproperties-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "elxproperties",
      storageBucket: "elxproperties.appspot.com",
      messagingSenderId: "250975584396",
      appId: "1:250975584396:web:a68528b30098952a313ba9",
      measurementId: "G-PYYQLQ34JY"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    // Initialize Firestore and Storage
    const db = firebase.firestore();
    const storage = firebase.storage();
  </script>

</head>

<body>
  <aside class="aside-cls z-ind-custom">
    <div class="col position-relative">

      <ul class="menu">
        <button class="hamburger1">
          <!-- material icons https://material.io/resources/icons/ -->
          <span class="closeIcon material-icons material-icons-close">
            <i class="fa-solid fa-close btn-close m-auto"></i>
          </span>
        </button>
        <li><a class="menuItem" href="#"><img src="images/home.svg" class="me-2" /> Home</a></li>
        <li><a class="menuItem" href="#"><img src="images/building.svg" class="me-2" /> Off-plan</a></li>
        <li><a class="menuItem" href="property-listing.html?offering_type=RS" id="navbarLink1"><img
              src="images/resale.svg" class="me-2" />Resale</a></li>
        <li><a class="menuItem" href="#"><img src="images/rent.svg" class="me-2" /> Rent</a></li>
        <li>
          <hr class="me-3" />
        </li>
        <li><a class="menuItem" href="#"><img src="images/video.svg" class="me-2" /> Video </a></li>
        <li><a class="menuItem" href="#"><img src="images/sell-with-us.svg" class="me-2" /> Sell With Us</a></li>
        <li><a class="menuItem" data-bs-title="Contact Us" href="#"><img src="images/contact.svg" class="me-2" />
            Contact</a></li>
        <li><a class="menuItem" href="#"><img src="images/saved.svg" class="me-2" /> Saved</a></li>
      </ul>
    </div>
  </aside>

  <div class="position-relative">
    <div class="wrapper-header">
      <header class="bg-coustom">
        <!-- Navbar -->
        <nav
          class="navbar fixed-top navbar-expand-lg shadow-none navbar-light navBar-elysian py-lg-3 z-index-nav-m bg-white">
          <div class="container">
            <aside class="aside-cls">
              <div class="col position-relative">
                <button class="hamburger">
                  <span class="menuIcon material-icons"><i class="fas fa-bars btn-open m-auto"></i></span>
                </button>
              </div>
            </aside>
            <!-- Navbar brand -->
            <a class="navbar-brand me-2 ps-lg-0 ps-md-0" href="index.html">
              <img src="images/logo.svg" class="site-logo m-center d-block" alt="site-logo" />
            </a>

            <!-- Toggle button for mobile -->
            <button class="navbar-toggler" type="button" data-mdb-toggle="collapse"
              data-mdb-target="#navbarButtonsExample" aria-controls="navbarButtonsExample" aria-expanded="false"
              aria-label="Toggle navigation">
              <i class="fas fa-bars"></i>
            </button>

            <!-- Collapsible wrapper -->
            <div class="collapse ms-auto justify-content-end navbar-collapse" id="navbarButtonsExample">
              <ul class="navbar-nav mb-2 mb-lg-0 me-lg-4 top-nav-elx-flag top-nav-elx-none d-block d-lg-none">
                <li class="nav-item dropdown position-static">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                    data-mdb-toggle="dropdown" aria-expanded="false">UAE</a>
                  <div class="dropdown-menu w-100 mt-0" aria-labelledby="navbarDropdown"></div>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">OFF-PLAN properties</a>
                </li>
                <li class="nav-item dropdown position-static">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown1" role="button"
                    data-mdb-toggle="dropdown" aria-expanded="false">Resale</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">Rent</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">Contact Us</a>
                </li>
              </ul>

              <div class="d-flex align-items-center justify-content-lg-end justify-content-center">
                <button class="btn py-2 navActionBtn me-2" data-bs-toggle="modal" data-bs-target="#contactFormModal"
                  data-bs-title="Sell your property">Sell your property</button>


                <a href="#" class="btn phone-btn shadow-none">
                  <img src="images/whatsaap-ico.svg" class="whatsaap-ico">
                  +971569124881
                </a>
              </div>
            </div>
          </div>
        </nav>

        <!--  <nav
          class="navbar nav-filter-inside d-block d-lg-block border-t bot-nav-elx fixed-top navbar-expand-lg shadow-none navbar-light nav-elx navBar-elysian py-lg-3 bg-white">
          <div class="container">
            <button class="navbar-toggler" type="button" data-mdb-toggle="collapse"
              data-mdb-target="#navbarButtonsExample" aria-controls="navbarButtonsExample" aria-expanded="false"
              aria-label="Toggle navigation">
              <i class="fas fa-bars"></i>
            </button>
          </div>
        </nav>-->
      </header>
    </div>
  </div>


  <!-- Property Details Section -->
  <section class="content grid main-prod pb-4 pb-lg-3" id="property-gallery" style="padding-top: 55px;">
    <!-- Dynamic content will be injected here -->
  </section>

  <!--  <section class="py-0">
    <div class="container">
      <div class="row  property-list">
        <div class="col-12 d-flex align-items-center nav-flow mt-0 nav-flow mt-lg-2 mb-3">
          <small class=" ">Home</small>
          <small class="mx-2"> / </small>
          <ul class="p-0">
            <li class="nav-item dropdown">
              <small id="dropdownMenu1" class="nav-link px-0 dropdown-toggle" role="button" data-mdb-toggle="dropdown"
                aria-expanded="false">Downtown Dubai</small>
              Dropdown menu 
              <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li><a class="dropdown-item" href="#">Something else here</a></li>
              </ul>
            </li>
          </ul>

          <small class="mx-2"> / </small>
          <ul class="p-0">
            <li class="nav-item dropdown">
              <small id="dropdownMenu1" class="nav-link px-0 dropdown-toggle active" role="button"
                data-mdb-toggle="dropdown" aria-expanded="false">Burj Kalifa</small>
              Dropdown menu 
              <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li><a class="dropdown-item" href="#">Something else here</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>
-->

  <section class="property-list py-0">
    <div class="container">
      <div class="row mt-0 mt-lg-0">

        <div class="col-12 col-lg-8">
          <div class="row">
            <p id="typeofProperty">Apartment & Penthouses</p>
            <h2 id="propertyTitle">Property Details Loading ...</h2>
            <ul class="d-lg-flex list-unstyled mt-auto">
              <li class="d-flex align-items-center">
                <small class="itm-small">1 - 3 Beds • 2 Baths • 1115 sq. ft • 1654 AED/sq. ft.</small>
              </li>
            </ul>
          </div>
          <p class="mt-3 mb-1"></p>
          <h2></h2>
          <p></a> </p>

          <p></p>
          <a type="button" data-bs-title="Check Availability"
            class="btn rounded-0 py-lg-3 px-4 hover-btn check-primary-btn ripple-surface" data-bs-toggle="modal"
            data-bs-target="#contactFormModal">
            Check Availability
            <i class="fas fa-arrow-right ms-3" aria-hidden="true"></i>
          </a>

          <hr class="my-4 my-lg-5" />

          <h2 class="mb-3 mb-lg-4">In Details</h2>
          <div class="col-12">
            <div class="row">
              <div class="col text-center">
                <img src="images/in-detaili-photo.png" class="card-img-top w-auto" alt="Photos" data-bs-toggle="modal"
                  data-bs-target="#photosModal">
                <div class="col">
                  <h5 class="card-title mt-3">Photos</h5>
                </div>
              </div>
              <div class="col text-center">
                <img src="images/in-detaili-floor-plan.png" class="card-img-top w-auto" alt="Floor Plan"
                  data-bs-toggle="modal" data-bs-target="#floorPlanModal">
                <div class="col">
                  <h5 class="card-title mt-3">Floor Plan</h5>
                </div>
              </div>
              <div class="col text-center">
                <img src="images/in-detaili-video.png" class="card-img-top w-auto" alt="Videos" data-bs-toggle="modal"
                  data-bs-target="#videosModal">
                <div class="col">
                  <h5 class="card-title mt-3">Video</h5>
                </div>
              </div>
              <div class="col text-center">
                <img src="images/in-detaili-map.png" class="card-img-top w-auto" alt="Map" data-bs-toggle="modal"
                  data-bs-target="#mapModal">
                <div class="col">
                  <h5 class="card-title mt-3">Map</h5>
                </div>
              </div>
            </div>
          </div>
          <hr class="my-4 my-lg-5" />
          <h2 class="mb-3 mb-lg-4">Features</h2>
          <div class="col-12 col-md-10">
            <ul class="p-0 home-ul" id="amenitiesList"></ul>
          </div>
          <a href="#" class="mt-3" id="viewAllFeatures">
            <span class="view-feat">View all features</span>
          </a>
          <hr class="my-4 my-lg-5" />

          <h2>Ask a Question</h2>

          <div class="col-12 col-lg-6">
            <div class="card bg-transparent shadow-none ask-question-card">
              <div class="row">
                <div class="col-3 d-flex align-items-center">
                  <img src="images/ico-pro.png" class="card-img-top w-auto" alt="...">
                </div>
                <div class="col-9">
                  <div class="card-body">
                    <h5 class="card-title">Hakeem Ajmal Khan</h5>
                    <p class="card-text">2 and 8 months with ELX Properties</p>
                    <a href="#" class="btn  px-0 bg-transparent shadow-none">
                      <img src="images/phone-ico.svg" class="me-2" alt=""> Show phone number
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Ask a Question Form -->
          <div class="col-12">
            <p>Contact Agent</p>
            <div class="mb-3">
              <textarea class="form-control rounded-0" id="agentMessage" rows="3"
                style="border: 1px solid #767676; background-color: #fff;"></textarea>

              <!-- Updated div with the "Request a tour" section -->
              <div class="card shadow-none border-top-0 mt-3 je2-request-tour">
                <div class="card-body border py-2">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="requestTourCheckbox">
                    <label class="form-check-label" for="requestTourCheckbox">Request a tour</label>
                  </div>

                  <!-- Tour Details Section -->
                  <div id="tourDetailsSection" class="w-100 d-flex align-items-center mt-2 flex-wrap d-none">
                    <fieldset class="form-group d-flex align-items-center mb-0 flex-grow-1">
                      <legend class="mb-0 me-3">Tour type</legend>
                      <div class="form-check me-4">
                        <input class="form-check-input" type="radio" name="tourType" id="inPerson" value="In-person"
                          checked>
                        <label class="form-check-label" for="inPerson">In-person</label>
                      </div>
                      <div class="form-check me-4">
                        <input class="form-check-input" type="radio" name="tourType" id="videoChat" value="Video chat">
                        <label class="form-check-label" for="videoChat">Video chat</label>
                      </div>
                    </fieldset>

                    <div class="form-group mb-0 ms-auto d-flex align-items-center" style="min-width: 250px;">
                      <label for="preferredDate" class="form-label me-2 mb-0">Preferred date</label>
                      <input type="text" class="form-control" id="preferredDate" readonly>
                    </div>
                  </div>

                  <!-- End of Tour Details Section -->
                </div>
              </div>
              <!-- End of updated div -->

            </div>

            <!-- Ask a Question Button -->
            <button id="submitTourRequest" data-bs-title="Ask a Question" type="button"
              class="btn h-100 rounded-0 py-lg-2 px-4 hover-btn check-primary-btn" data-bs-toggle="modal"
              data-bs-target="#contactFormModal">
              Ask a Question11
            </button>

          </div>

          <!-- Ask a Question Validation Script -->
          <script>
            $(document).ready(function () {
              const $requestTourCheckbox = $('#requestTourCheckbox');
              const $tourDetailsSection = $('#tourDetailsSection');
              const $submitTourRequest = $('#submitTourRequest');
              const $tourTypeRadios = $('input[name="tourType"]');
              const $preferredDate = $('#preferredDate');
              const $agentMessage = $('#agentMessage'); // Message text area

              // Initialize the date picker
              const datepickerInstance = flatpickr($preferredDate[0], {
                minDate: "today",
                maxDate: new Date().fp_incr(3), // 3 days ahead
                dateFormat: "m/d/Y",
                onChange: validateForm // Validate form when date is changed
              });

              // Toggle the visibility of the tour details section based on checkbox status
              $requestTourCheckbox.on('change', function () {
                if (this.checked) {
                  $tourDetailsSection.removeClass('d-none');
                  validateForm(); // Trigger validation when checkbox is checked
                } else {
                  $tourDetailsSection.addClass('d-none');
                }
              });

              // Enable submit button only when a tour type is selected and a date is picked
              function validateForm() {
                const isTourTypeSelected = $tourTypeRadios.is(':checked');
                const isDateSelected = $preferredDate.val() !== '';

                // If both tour type and date are selected, append the tour message to the agentMessage textarea
                if (isTourTypeSelected && isDateSelected) {
                  appendTourDetails();
                }

                // Enable or disable the submit button
                $submitTourRequest.prop('disabled', !(isTourTypeSelected && isDateSelected));
              }

              // Append the tour details message to the text area if the checkbox is checked
              function appendTourDetails() {
                const selectedTourType = $('input[name="tourType"]:checked').next('label').text(); // Get the selected tour type
                const selectedDate = $preferredDate.val(); // Get the selected date

                if (!selectedTourType || !selectedDate) {
                  return; // If there's no valid tour type or date, skip the rest
                }

                const tourMessage = `I would like to have an ${selectedTourType.toLowerCase()} meet up on ${selectedDate}.`;

                // Append the tour message to the agent's message if not already present
                const currentMessage = $agentMessage.val();
                if (!currentMessage.includes(tourMessage)) {
                  $agentMessage.val(`${currentMessage}\n${tourMessage}`.trim());
                }
              }

              // Add event listeners to the radio buttons and date picker to validate the form
              $tourTypeRadios.on('change', validateForm);
              $preferredDate.on('change', validateForm);

              // Ask a Question button click event - open the modal
              $submitTourRequest.on('click', function () {
                // Ensure there's a value in the agentMessage textarea
                if (!$agentMessage.val().trim()) {
                  alert("Please enter a message before proceeding.");
                  return;
                }

                // Trigger the modal
                $('#contactFormModal').modal('show');

                // Add the message to the hidden message field in the modal
                const modalMessageField = $('#contactFormMessage'); // Assuming this hidden field exists in your modal
                modalMessageField.val($agentMessage.val()); // Transfer the agent message to the modal
              });
            });
          </script>








          <style>
            .je2-request-tour .form-check-input {
              margin-right: 5px;
            }

            .je2-request-tour .form-group {
              display: flex;
              align-items: center;
              flex-wrap: wrap;
            }

            .je2-request-tour .form-label {
              margin-bottom: 0;
            }

            .je2-request-tour .form-group .form-control {
              max-width: 100%;
              width: 100%;
              min-width: 200px;
              /* Ensure that the date picker has a minimum width */
            }

            @media (max-width: 768px) {
              #tourDetailsSection {
                flex-direction: column;
                align-items: flex-start;
              }

              #tourDetailsSection .form-group {
                width: 100%;
                margin-top: 15px;
              }

              #tourDetailsSection .form-check {
                margin-right: 0;
              }

              #tourDetailsSection .form-label {
                margin-right: 0;
              }
            }
          </style>





          <div class="col-12">
            <hr class="my-4 my-lg-5" />
            <h2>Explore the Area</h2>

            <div class="row">
              <div class="col-12 col-md-9">
                <p class="map-font-p"></p>
              </div>
              <div class="col-12 col-md-3 d-lg-flex justify-content-center justify-content-lg-end">
                <a href="#" class="map-font-a" id="googleMapLink">See on Google map</a>
              </div>
            </div>

            <iframe id="googleMapIframe" width="100%" height="330px" style="border:0;" allowfullscreen="" loading="lazy"
              referrerpolicy="no-referrer-when-downgrade">
            </iframe>

            <div class="row">
              <div class="col-12 col-md-6">
                <a href="#" class="map-font-a">Request Location Information </a>
              </div>
              <div class="col-12 col-md-6 d-lg-flex justify-content-center justify-content-lg-end">
                <a href="#" class="map-font-a" id="viewMoreListingsLink">View more listings in this area</a>
              </div>
            </div>
          </div>


        </div>

        <!-- Hidden fields for additional property details -->
        <input type="hidden" id="community" value="">
        <input type="hidden" id="subCommunity" value="">
        <input type="hidden" id="building" value="">
        <input type="hidden" id="referenceNumber" value="">
        <input type="hidden" id="propertyLink" value="">
        <input type="hidden" id="ipAddress">

        <!-- Non-Modal Form -->
        <div class="col-12 col-lg-4">
          <div class="card pro-card shadow-none sidebar-1 sticky-spacer sticky-content">
            <div class="card-body">
              <div class="row">
                <div class="col-3 d-flex align-items-center">
                  <img src="images/ico-pro.png" class="card-img-top w-auto" alt="...">
                </div>
                <div class="col-9">
                  <div class="card-body py-1">
                    <h5 class="card-title">Hakeem Ajmal Khan</h5>
                    <p class="card-text mb-0">2 and 8 months with ELX Properties</p>
                    <a href="#" class="btn px-0 bg-transparent shadow-none">
                      <img src="images/phone-ico.svg" class="me-2" alt=""> Show phone number
                    </a>
                  </div>
                </div>
              </div>
              <hr class="my-2" />
              <h5 class="card-title mb-3">Contact Agent</h5>
              <div id="customContactForm" class="col border p-3 bg-white">
                <!-- Name Field -->
                <div class="col-12 mb-3">
                  <input type="text" class="form-control custom-sell-height" placeholder="Name*" id="customFormName"
                    required>
                  <div class="invalid-feedback">Please enter your name.</div>
                </div>

                <!-- Email Field -->
                <div class="col-12 mb-3">
                  <input type="email" class="form-control custom-sell-height" placeholder="Email*" id="customFormEmail"
                    required>
                  <div class="invalid-feedback">Please enter a valid email address.</div>
                </div>

                <!-- Phone Field with Country Dropdown -->
                <div class="col-12 mb-3">
                  <input type="tel" class="form-control custom-sell-height" placeholder="Phone*" id="customFormPhone"
                    required>
                </div>

                <!-- Message Field (Text Area) -->
                <div class="col-12 mb-3 mb-0">
                  <textarea class="form-control border-0 txt-area" placeholder="Type your message...."
                    id="contactFormMessage" rows="3"></textarea> <!-- Message field -->
                </div>
              </div>

              <!-- Center the Send Message button -->
              <div class="d-flex justify-content-center">
                <a type="button" id="submitCustomContactForm"
                  class="btn rounded-0 w-75 py-lg-3 px-4 hover-btn check-primary-btn ripple-surface mt-3 py-lg-2">
                  Send Message
                </a>
              </div>
            </div>
          </div>
        </div>







      </div>
    </div>
  </section>
  <section class="pt-0">
    <div class="container">
      <div class="row">
        <hr class="my-4 my-lg-5" />
        <div class="position-relative slider-owl">
          <h2 class="mb-3 mb-lg-5">Major Communities</h2>
          <div class="owl-carousel owl-theme projectdetail-owl"> <!-- Updated class here -->
            <!-- Dynamic items will be injected here -->
          </div>
          <div class="owl-nav">

          </div>

        </div>
      </div>
    </div>
  </section>


  <!-- Footer Section -->
  <footer class="pt-3 pt-md-4 pb-2 pt-lg-5">
    <div class="container">
      <div class="row">
        <div class="col-12 col-lg-12 m-venter">
          <img src="images/foot-logo.svg" class="my-4 foot-logo" />
        </div>
        <div class="col-12 col-lg-9">
          <div class="row row-cols-2 row-cols-lg-5">
            <div class="col">
              <h3 class="my-4">ELX Properties</h3>
              <ul class="p-0">
                <li class="mb-1 mb-lg-2"> <a href="#"> About </a></li>
                <li class="mb-1 mb-lg-2"> <a href="#">Contact</a></li>
                <li class="mb-1 mb-lg-2"> <a href="#">Careers</a></li>
                <li class="mb-1 mb-lg-2"> <a href="#">Help & FAQ</a></li>
              </ul>
            </div>
            <div class="col">
              <h3 class="my-4">Categories</h3>
              <ul class="p-0">
                <li class="mb-1 mb-lg-2"> <a href="property-listing.html?category=Apartment"> Apartments </a></li>
                <li class="mb-1 mb-lg-2"> <a href="property-listing.html?category=Penthouse">Penthouses</a></li>
                <li class="mb-1 mb-lg-2"> <a href="property-listing.html?category=Townhouse">Townhouses</a></li>
                <li class="mb-1 mb-lg-2"> <a href="property-listing.html?category=Villa">Villas</a></li>
              </ul>
            </div>
            <div class="col">
              <h3 class="my-4">Explore</h3>
              <ul class="p-0">
                <li class="mb-1 mb-lg-2"> <a href="#"> Off plan Projects</a></li>
                <li class="mb-1 mb-lg-2"> <a href="property-listing.html?offering_type=RS" id="navbarLink1">Resale</a>
                </li>
                <li class="mb-1 mb-lg-2"> <a href="property-listing.html?offering_type=RR">Rent</a></li>
                <li class="mb-1 mb-lg-2"> <a href="#">Blog</a></li>
              </ul>
            </div>

          </div>
        </div>
      </div>
      <div class="row">
        <hr class="mt-3 mt-lg-4" />
      </div>
    </div>
  </footer>
  <section class="py-2 py-md-3 after-footer">
    <div class="container">
      <div class="row">
        <div class="col-12 col-md-9 mb-3">
          <ul class="p-0 d-block d-md-flex justify-content-center justify-content-md-start">
            <li class="tearms m-center"><a class="pe-2" href="#" target="_blank">Terms & Conditions</a></li>
            <li class="tearms m-center py-3 py-md-0"><a href="#" class="px-2" target="_blank"> Privacy & Cookies</a>
            </li>
            <li class="ps-2 m-center"> Copyright © elxproperties 2024 . All Rights Reserved</li>
          </ul>

        </div>


        <div class="col-12 col-md-3 text-center">
          <ul class="d-flex justify-content-center justify-content-md-end p-0 soc-ico-ul">
            <li class="soc-ico px-md-1 px-2"> <a href="https://www.instagram.com/elxproperties/" class="px-0"
                target="_blank">
                <img src="images/insta-ico.svg" class="" alt="" />
              </a></li>
            <li class="soc-ico px-xl-2 px-md-1 px-2"> <a href="https://www.facebook.com/elxproperties" class="px-0"
                target="_blank">
                <img src="images/fb-ico.svg" class="" alt="" />
                </i></a></li>
            <li class="soc-ico px-xl-2 px-md-1 px-2"> <a href="https://www.tiktok.com/@elx_properties" target="_blank"
                class="px-0">
                <img src="images/ticktok-ico.svg" class="" alt="" />
              </a></li>
            <li class="soc-ico px-xl-2 px-md-1 px-2"> <a href="https://www.linkedin.com/company/elx-properties"
                class="px-0" target="_blank">
                <img src="images/linked-in-ico.svg" class="" alt="" />
              </a></li>
            <li class="soc-ico px-xl-2 px-md-1 px-2"> <a href="www.youtube.com/@elxproperties" class="px-0"
                target="_blank">
                <img src="images/youtub-ico.svg" class="" alt="" />
              </a></li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <a class="scroll-top-arrow wave" style="display: none;"> <i class="fa fa-angle-up"></i> </a>

  <section class="py-2 d-md-none d-block m-fixed w-100 start-0">
    <div class="container">
      <div class="row">
        <div class="col-6 d-flex">
          <a href="tel:+971569124881"
            class="btn w-100 py-1 navActionBtn me-2  d-flex justify-content-center align-items-center"><i
              class="fas fa-phone-alt me-2"></i> Call Now</a>
        </div>
        <div class="col-6 d-flex">
          <a href="#" class="btn w-100 py-1 navActionBtn  d-flex justify-content-center align-items-center">
            <img src="images/whatsaap-ico.svg" class="whatsaap-ico me-2"> Whatsaap
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Add intl-tel-input CSS and JS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/css/intlTelInput.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/intlTelInput.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/utils.js"></script>
  <!-- Modal Structure -->
  <div class="modal fade" id="contactFormModal" tabindex="-1" aria-labelledby="contactFormModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header pb-0 border-0">
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body py-3 py-lg-4 px-3 px-md-5">
          <h2 id="dynamicModalHeading" class="mb-3 text-center">How can the agent send<br />you the floor plan</h2>
          <!-- Hidden fields for additional property details in the modal -->
          <input type="hidden" id="communityModal" value="">
          <input type="hidden" id="subCommunityModal" value="">
          <input type="hidden" id="buildingModal" value="">
          <input type="hidden" id="referenceNumberModal" value="">
          <!-- Hidden input to store the message -->
          <input type="hidden" id="contactFormMessage" value="">
          <!-- Form Fields -->
          <div class="col-12 mb-3">
            <input type="text" class="form-control custom-sell-height" placeholder="Name*" id="contactFormNameModal"
              required>
            <div class="invalid-feedback">Please enter your name.</div>
          </div>
          <div class="col-12 mb-3">
            <input type="email" class="form-control custom-sell-height" placeholder="Email*" id="contactFormEmailModal"
              required>
            <div class="invalid-feedback">Please enter a valid email address.</div>
          </div>
          <div class="col-12 mb-3">
            <input type="tel" class="form-control custom-sell-height" placeholder="Phone*" id="contactFormPhoneModal"
              required>
          </div>

          <!-- Checkboxes -->
          <div class="col-12 mb-3">
            <div class="form-check">
              <input type="checkbox" class="form-check-input" id="notifyByEmail">
              <label class="form-check-label" for="notifyByEmail">Notify me via email when similar listings
                appear.</label>
            </div>
          </div>
          <div class="col-12 mb-3">
            <div class="form-check">
              <input type="checkbox" class="form-check-input" id="agreeToTerms" required>
              <label class="form-check-label" for="agreeToTerms">I agree to the Terms of Use and Privacy Policy.</label>
              <div class="invalid-feedback">You must agree to the terms and privacy policy.</div>
            </div>
          </div>

          <!-- Loading Spinner -->
          <div id="formLoadingSpinner" class="spinner-border text-primary d-none" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>

          <!-- Success/Failure Message -->
          <div id="formSubmitMessage" class="text-center mt-3 d-none"></div>

          <!-- Submit Button -->
          <div class="col-12 my-3 my-md-4">
            <button type="submit" class="btn w-100 rounded-0 py-lg-3 py-3 px-5 px-lg-4 check-primary-btn"
              id="submitContactForm" disabled>
              Request to Call Back
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

   <script>
    document.addEventListener('DOMContentLoaded', function () {

      // Function to update the modal title dynamically based on the button clicked
      function updateModalTitle(event) {
        const button = event.relatedTarget; // Button that triggered the modal
        const title = button.getAttribute('data-bs-title'); // Extract the title from data-bs-title attribute
        const modalTitle = document.getElementById('dynamicModalHeading'); // Modal title element

        // Set the modal title dynamically
        modalTitle.textContent = title;

        // Check if the modal is triggered by the "Ask a Question" button
        if (button && button.id === 'submitTourRequest') {

          // If it's the "Ask a Question" button, pre-fill the hidden message field with the content of agentMessage
          const agentMessage = document.getElementById('agentMessage').value;
          const messageField = document.getElementById('contactFormMessage'); // Hidden message field in the modal
          messageField.value = agentMessage; // Pre-fill the modal hidden message field with agent message
         // alert(agentMessage);
        } else {
          // If it's not the "Ask a Question" button, reset the hidden message field
          const messageField = document.getElementById('contactFormMessage');
          const referenceNumber = document.getElementById('referenceNumber').value;
          messageField.value = 'Hi, I would like to know more about the property ' + referenceNumber;
        }
      }

      // Add an event listener for when the modal is about to be shown
      const contactFormModal = document.getElementById('contactFormModal');
      contactFormModal.addEventListener('show.bs.modal', updateModalTitle);

      // Modal form elements
      const modalFormFields = {
        name: document.getElementById('contactFormNameModal'),
        email: document.getElementById('contactFormEmailModal'),
        phone: document.getElementById('contactFormPhoneModal'),
        message: document.getElementById('contactFormMessage') // Hidden message field for capturing messages
      };

      const modalSubmitButton = document.getElementById('submitContactForm');
      const modalFormLoadingSpinner = document.getElementById('formLoadingSpinner');
      const modalFormSubmitMessage = document.getElementById('formSubmitMessage');
      let modalPhoneInput;

      // Initialize intlTelInput for modal form phone input
      function initializeModalPhoneInput() {
        modalPhoneInput = intlTelInput(modalFormFields.phone, {
          utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/utils.js",
          initialCountry: "AE",
          separateDialCode: true,
          preferredCountries: ["AE", "US", "GB"]
        });
      }

      initializeModalPhoneInput(); // Initialize the phone input for modal form

      // Show loading spinner for modal form
      function showModalLoadingSpinner() {
        modalFormLoadingSpinner.classList.remove('d-none');
        modalFormSubmitMessage.classList.add('d-none');
      }

      // Hide loading spinner and display success/failure message for modal form
      function hideModalLoadingSpinner(success = true) {
        modalFormLoadingSpinner.classList.add('d-none');
        modalFormSubmitMessage.classList.remove('d-none');
        modalFormSubmitMessage.textContent = success ? 'Your inquiry has been submitted successfully.' : 'There was an error submitting your inquiry. Please try again.';
        modalFormSubmitMessage.classList.toggle('text-success', success);
        modalFormSubmitMessage.classList.toggle('text-danger', !success);
      }

      // Function to fetch the user's IP address
      async function fetchModalIpAddress() {
        try {
          const response = await fetch('https://api.ipify.org?format=json');
          const data = await response.json();
          return data.ip;
        } catch (error) {
          console.error('Error fetching IP address:', error);
          return 'N/A';
        }
      }

      // Save modal form data to Firebase Firestore
      async function saveModalFormDataToFirebase(formFields, phoneInput) {
        showModalLoadingSpinner(); // Show loading spinner when submitting

        // Fetch dynamic property details from modal-specific hidden fields
        const community = document.getElementById('community').value;
        const subCommunity = document.getElementById('subCommunity').value;
        const building = document.getElementById('building').value;
        const referenceNumber = document.getElementById('referenceNumber').value;
        const propertyLink = window.location.href;
        const currentDate = new Date().toISOString();
        const ipAddress = await fetchModalIpAddress(); // Fetch IP address

        const formData = {
          name: formFields.name.value,
          email: formFields.email.value,
          phone: phoneInput.getNumber(),
          message: formFields.message.value, // Hidden message field
          referenceNumber: referenceNumber,
          community: community,
          subCommunity: subCommunity,
          building: building,
          propertyLink: propertyLink,
          dateSubmitted: currentDate,
          ipAddress: ipAddress // Add IP address
        };

        try {
          await db.collection("contactFormSubmissions").add(formData);
          hideModalLoadingSpinner(true); // Show success message
          window.location.href = "thankyou.html"; // Redirect to thank you page
        } catch (error) {
          hideModalLoadingSpinner(false); // Show failure message
          console.error('Error adding document: ', error);
        }
      }

      // Custom validation function
      function validateModalForm() {
        let isValid = true;

        // Validate name
        if (!modalFormFields.name.value.trim()) {
          modalFormFields.name.classList.add('is-invalid');
          isValid = false;
        } else {
          modalFormFields.name.classList.remove('is-invalid');
        }

        // Validate email
        const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        if (!emailPattern.test(modalFormFields.email.value)) {
          modalFormFields.email.classList.add('is-invalid');
          isValid = false;
        } else {
          modalFormFields.email.classList.remove('is-invalid');
        }

        // Validate phone number
        if (!modalPhoneInput.isValidNumber()) {
          modalFormFields.phone.classList.add('is-invalid');
          isValid = false;
        } else {
          modalFormFields.phone.classList.remove('is-invalid');
        }

        // Enable or disable the submit button based on validation
        modalSubmitButton.disabled = !isValid;

        return isValid;
      }

      // Add input listeners to enable button on valid data
      Object.values(modalFormFields).forEach(field => {
        field.addEventListener('input', validateModalForm);
      });

      // Modal form submit event listener
      modalSubmitButton.addEventListener('click', function (event) {
        event.preventDefault();

        // Perform form validation
        if (validateModalForm()) {
          saveModalFormDataToFirebase(modalFormFields, modalPhoneInput);
        } else {
          alert("Please fill all required fields correctly.");
        }
      });
    });
  </script>

<!-- Modal form script with unique function and variable names 
  <script>
    document.addEventListener('DOMContentLoaded', function () {

      // Function to update the modal title dynamically based on the button clicked
      function updateModalTitle(event) {
        const button = event.relatedTarget; // Button that triggered the modal
        const title = button.getAttribute('data-bs-title'); // Extract the title from data-bs-title attribute
        const modalTitle = document.getElementById('dynamicModalHeading'); // Modal title element

        // Set the modal title dynamically
        modalTitle.textContent = title;
      }

      // Add an event listener for when the modal is about to be shown
      const contactFormModal = document.getElementById('contactFormModal');
      contactFormModal.addEventListener('show.bs.modal', updateModalTitle);

      // Modal form elements
      const modalFormFields = {
        name: document.getElementById('contactFormNameModal'),
        email: document.getElementById('contactFormEmailModal'),
        phone: document.getElementById('contactFormPhoneModal')
      };

      const modalSubmitButton = document.getElementById('submitContactForm');
      const modalFormLoadingSpinner = document.getElementById('formLoadingSpinner');
      const modalFormSubmitMessage = document.getElementById('formSubmitMessage');
      let modalPhoneInput;

      // Initialize intlTelInput for modal form phone input
      function initializeModalPhoneInput() {
        modalPhoneInput = intlTelInput(modalFormFields.phone, {
          utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/utils.js",
          initialCountry: "AE",
          separateDialCode: true,
          preferredCountries: ["AE", "US", "GB"]
        });
      }

      initializeModalPhoneInput(); // Initialize the phone input for modal form

      // Show loading spinner for modal form
      function showModalLoadingSpinner() {
        modalFormLoadingSpinner.classList.remove('d-none');
        modalFormSubmitMessage.classList.add('d-none');
      }

      // Hide loading spinner and display success/failure message for modal form
      function hideModalLoadingSpinner(success = true) {
        modalFormLoadingSpinner.classList.add('d-none');
        modalFormSubmitMessage.classList.remove('d-none');
        modalFormSubmitMessage.textContent = success ? 'Your inquiry has been submitted successfully.' : 'There was an error submitting your inquiry. Please try again.';
        modalFormSubmitMessage.classList.toggle('text-success', success);
        modalFormSubmitMessage.classList.toggle('text-danger', !success);
      }

      // Function to fetch the user's IP address
      async function fetchModalIpAddress() {
        try {
          const response = await fetch('https://api.ipify.org?format=json');
          const data = await response.json();
          return data.ip;
        } catch (error) {
          console.error('Error fetching IP address:', error);
          return 'N/A';
        }
      }

      // Save modal form data to Firebase Firestore
      async function saveModalFormDataToFirebase(formFields, phoneInput) {
        showModalLoadingSpinner(); // Show loading spinner when submitting

        // Fetch dynamic property details from modal-specific hidden fields
        const community = document.getElementById('community').value;
        const subCommunity = document.getElementById('subCommunity').value;
        const building = document.getElementById('building').value;
        const referenceNumber = document.getElementById('referenceNumber').value;
        const propertyLink = window.location.href;
        const currentDate = new Date().toISOString();
        const ipAddress = await fetchModalIpAddress(); // Fetch IP address

        const formData = {
          name: formFields.name.value,
          email: formFields.email.value,
          phone: phoneInput.getNumber(),
          message: 'Hi, I would like to know more about the property ' + referenceNumber, // Pre-fill message
          referenceNumber: referenceNumber,
          community: community,
          subCommunity: subCommunity,
          building: building,
          propertyLink: propertyLink,
          dateSubmitted: currentDate,
          ipAddress: ipAddress // Add IP address
        };

        try {
          await db.collection("contactFormSubmissions").add(formData);
          hideModalLoadingSpinner(true); // Show success message
          window.location.href = "thankyou.html"; // Redirect to thank you page
        } catch (error) {
          hideModalLoadingSpinner(false); // Show failure message
          console.error('Error adding document: ', error);
        }
      }

      // Custom validation function
      function validateModalForm() {
        let isValid = true;

        // Validate name
        if (!modalFormFields.name.value.trim()) {
          modalFormFields.name.classList.add('is-invalid');
          isValid = false;
        } else {
          modalFormFields.name.classList.remove('is-invalid');
        }

        // Validate email
        const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        if (!emailPattern.test(modalFormFields.email.value)) {
          modalFormFields.email.classList.add('is-invalid');
          isValid = false;
        } else {
          modalFormFields.email.classList.remove('is-invalid');
        }

        // Validate phone number
        if (!modalPhoneInput.isValidNumber()) {
          modalFormFields.phone.classList.add('is-invalid');
          isValid = false;
        } else {
          modalFormFields.phone.classList.remove('is-invalid');
        }

        // Enable or disable the submit button based on validation
        modalSubmitButton.disabled = !isValid;

        return isValid;
      }

      // Add input listeners to enable button on valid data
      Object.values(modalFormFields).forEach(field => {
        field.addEventListener('input', validateModalForm);
      });

      // Modal form submit event listener
      modalSubmitButton.addEventListener('click', function (event) {
        event.preventDefault();

        // Perform form validation
        if (validateModalForm()) {
          saveModalFormDataToFirebase(modalFormFields, modalPhoneInput);
        } else {
          alert("Please fill all required fields correctly.");
        }
      });
    });
  </script>
-->
 

  <!-- custom form script-->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const customFormFields = {
        name: document.getElementById('customFormName'),
        email: document.getElementById('customFormEmail'),
        phone: document.getElementById('customFormPhone'),
        message: document.getElementById('contactFormMessage') // Include the message field
      };

      const customSubmitButton = document.getElementById('submitCustomContactForm');
      const formLoadingSpinner = document.getElementById('formLoadingSpinner');
      const formSubmitMessage = document.getElementById('formSubmitMessage');
      let customPhoneInput;

      // Initialize intlTelInput for custom form phone input
      function initializePhoneInput() {
        customPhoneInput = intlTelInput(customFormFields.phone, {
          utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/utils.js",
          initialCountry: "AE",
          separateDialCode: true,
          preferredCountries: ["AE", "US", "GB"]
        });
      }

      initializePhoneInput(); // Initialize the phone input

      // Show loading spinner
      function showLoadingSpinner() {
        formLoadingSpinner.classList.remove('d-none');
        formSubmitMessage.classList.add('d-none');
      }

      // Hide loading spinner and display success/failure message
      function hideLoadingSpinner(success = true) {
        formLoadingSpinner.classList.add('d-none');
        formSubmitMessage.classList.remove('d-none');
        formSubmitMessage.textContent = success ? 'Your inquiry has been submitted successfully.' : 'There was an error submitting your inquiry. Please try again.';
        formSubmitMessage.classList.toggle('text-success', success);
        formSubmitMessage.classList.toggle('text-danger', !success);
      }

      // Function to fetch the user's IP address
      async function fetchIpAddress() {
        try {
          const response = await fetch('https://api.ipify.org?format=json');
          const data = await response.json();
          return data.ip;
        } catch (error) {
          console.error('Error fetching IP address:', error);
          return 'N/A';
        }
      }

      // Save form data to Firebase Firestore
      async function saveFormDataToFirebase(formFields, phoneInput) {
        showLoadingSpinner(); // Show loading spinner when submitting


        const community = document.getElementById('community').value;
        const subCommunity = document.getElementById('subCommunity').value;
        const building = document.getElementById('building').value;
        const referenceNumber = document.getElementById('referenceNumber').value;
        const propertyLink = window.location.href;
        const currentDate = new Date().toISOString();
        const ipAddress = await fetchIpAddress(); // Fetch IP address

        const formData = {
          name: formFields.name.value,
          email: formFields.email.value,
          phone: phoneInput.getNumber(),
          message: formFields.message.value || 'No message provided', // Include the message field
          referenceNumber: referenceNumber, // Include the reference number field
          community: community,
          subCommunity: subCommunity,
          building: building,
          propertyLink: propertyLink,
          dateSubmitted: currentDate,
          ipAddress: ipAddress // Add IP address
        };

        try {
          await db.collection("contactFormSubmissions").add(formData);
          hideLoadingSpinner(true); // Show success message
          window.location.href = "thankyou.html"; // Redirect to thank you page
        } catch (error) {
          hideLoadingSpinner(false); // Show failure message
          console.error('Error adding document: ', error);
        }
      }

      // Custom form submit event listener
      customSubmitButton.addEventListener('click', function (event) {
        event.preventDefault();

        // Basic form validation before proceeding
        if (!customFormFields.name.value || !customFormFields.email.value || !customFormFields.phone.value) {
          alert("Please fill all required fields.");
          return;
        }

        saveFormDataToFirebase(customFormFields, customPhoneInput);
      });
    });
  </script>



  <!-- Modal for viewing all features -->
  <div class="modal fade" id="featuresModal" tabindex="-1" aria-labelledby="featuresModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="featuresModalLabel">All Features</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <ul id="allFeaturesList" class="p-0 home-ul"></ul>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modals for Photos, Floor Plan, Videos, and Map -->
  <!-- Photos Modal -->
  <div class="modal fade" id="photosModal" tabindex="-1" aria-labelledby="photosModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div id="photosCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
              <!-- Photos will be dynamically inserted here -->
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#photosCarousel" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#photosCarousel" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Floor Plan Modal -->
  <div class="modal fade" id="floorPlanModal" tabindex="-1" aria-labelledby="floorPlanModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <img id="floorPlanImage" class="img-fluid" src="" alt="Floor Plan">
        </div>
      </div>
    </div>
  </div>

  <!-- Videos Modal -->
  <div class="modal fade" id="videosModal" tabindex="-1" aria-labelledby="videosModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <video id="videoPlayer" class="w-100" controls>
            <source src="" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      </div>
    </div>
  </div>

  <!-- Map Modal -->
  <div class="modal fade" id="mapModal" tabindex="-1" aria-labelledby="mapModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <iframe id="mapIframe" class="w-100 h-100" src="" frameborder="0" allowfullscreen></iframe>
        </div>
      </div>
    </div>
  </div>


  <!-- MDB -->




  <script>
    // Menu toggle script
    const menu = document.querySelector(".menu");
    const menuItems = document.querySelectorAll(".menuItem");
    const hamburger = document.querySelector(".hamburger");
    const hamburger1 = document.querySelector(".hamburger1");
    const closeIcon = document.querySelector(".closeIcon");
    const menuIcon = document.querySelector(".menuIcon");

    function toggleMenu() {
      // alert("Menu toggled"); // Debugging alert
      //console.log("Menu toggle function triggered"); // Debugging console log
      if (menu.classList.contains("showMenu")) {
        menu.classList.remove("showMenu");
        closeIcon.style.display = "none";
        menuIcon.style.display = "block";
        //console.log("Menu closed"); // Debugging console log
      } else {
        menu.classList.add("showMenu");
        closeIcon.style.display = "block";
        menuIcon.style.display = "none";
        //console.log("Menu opened"); // Debugging console log
      }
    }

    hamburger.addEventListener("click", toggleMenu);
    hamburger1.addEventListener("click", toggleMenu);

    menuItems.forEach(function (menuItem) {
      menuItem.addEventListener("click", toggleMenu);
      console.log("Menu item click event added"); // Debugging console log
    });

    // Request Tour Toggle Script
    document.addEventListener('DOMContentLoaded', function () {
      const requestTourCheckbox = document.getElementById('requestTourCheckbox');
      const tourDetailsSection = document.getElementById('tourDetailsSection');
      const submitTourRequest = document.getElementById('submitTourRequest');
      const tourTypeRadios = document.querySelectorAll('input[name="tourType"]');
      const preferredDate = document.getElementById('preferredDate');

      // Initialize the date picker
      const datepickerInstance = flatpickr(preferredDate, {
        minDate: "today",
        maxDate: new Date().fp_incr(3), // 3 days ahead
        dateFormat: "m/d/Y",
        onChange: validateForm // Validate form when date is changed
      });

      // Toggle the visibility of the tour details section based on checkbox status
      requestTourCheckbox.addEventListener('change', function () {
        // alert("Checkbox changed: " + this.checked); // Debugging alert
        console.log('Checkbox changed:', this.checked); // Debugging console log
        if (this.checked) {
          tourDetailsSection.classList.remove('d-none');
          console.log("Tour details section shown"); // Debugging console log
        } else {
          tourDetailsSection.classList.add('d-none');
          resetForm();
          console.log("Tour details section hidden and form reset"); // Debugging console log
        }
      });

      // Enable submit button only when a tour type is selected and a date is picked
      function validateForm() {
        console.log("Validating form..."); // Debugging console log
        const isTourTypeSelected = Array.from(tourTypeRadios).some(radio => radio.checked);
        const isDateSelected = preferredDate.value !== '';
        submitTourRequest.disabled = !(isTourTypeSelected && isDateSelected);
        console.log("Form validation result: ", isTourTypeSelected && isDateSelected); // Debugging console log
      }

      // Add event listeners to the radio buttons
      tourTypeRadios.forEach(radio => {
        radio.addEventListener('change', validateForm);
        console.log("Radio button change event added"); // Debugging console log
      });

      // Reset the form when the checkbox is unchecked
      function resetForm() {
        tourTypeRadios.forEach(radio => {
          radio.checked = false;
        });
        preferredDate.value = '';
        submitTourRequest.disabled = true;
        console.log("Form reset"); // Debugging console log
      }
    });
  </script>






  <script>
    AOS.init();
  </script>

  <style>
    .slider-owl .owl-nav {
      position: absolute;
      top: -104px;
      right: 0;
    }
  </style>








  <!-- Footer and other sections -->


  <script type="text/javascript" src="js/mdb.min.js"></script>



  <script>
    // Function to get URL parameter
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    // Function to load and bind property data
    function loadPropertyDetails(data) {

      
      // Determine if the offering type is for Sale or Rent
      let offeringTypeText = '';
      if (data.offeringType === 'CS' || data.offeringType === 'RS') {
        offeringTypeText = 'for Sale';
      } else {
        offeringTypeText = 'for Rent';
      }

      // Construct the dynamic text for property type, sale/rent, property name, community, and sub-community
      const propertyTypeText = `${data.propertyType}  ${offeringTypeText} in ${data.propertyName}, ${data.community}, ${data.subCommunity}`;

      // Bind this text to the paragraph with id 'typeofProperty'
      const propertyTypeElement = document.getElementById('typeofProperty');
      if (propertyTypeElement) {
        propertyTypeElement.textContent = propertyTypeText;
      }
      // Bind the property type and title
      //document.querySelector('.property-list p').textContent = data.propertyType || '';
      document.querySelector('.property-list h2').textContent = data.title || '';

      // Bind the property details (Beds, Baths, Size, Price)
      const propertyDetailsElement = document.querySelector('.itm-small');
      if (propertyDetailsElement) {
        propertyDetailsElement.textContent = `${data.bedrooms || 0} Beds • ${data.bathrooms || 0} Baths • ${data.size.toLocaleString()} sq. ft • AED ${Math.round(data.pricing.price / data.size).toLocaleString()} / sq. ft.`;
      }

      // Bind the starting price and description
      const startingPriceElement = document.querySelector('.property-list .mt-3.mb-1 + h2');
      if (startingPriceElement) {
        startingPriceElement.textContent = `AED ${data.pricing.price.toLocaleString()}`;
      }

      // Pre-fill the textarea with the dynamic message
      const messageField = document.getElementById('contactFormMessage');
      if (messageField) {
        messageField.value = `Hi, I would like to know more about the property ${data.referenceNumber || 'N/A'}`;
      }

      // Bind the community, sub-community, building, and reference number (new dynamic data)
      const communityElement = document.getElementById('community');
      const subCommunityElement = document.getElementById('subCommunity');
      const buildingElement = document.getElementById('building');
      const referenceNumberElement = document.getElementById('referenceNumber');
      const propertyLink = window.location.href;
      if (communityElement) communityElement.value = data.community || 'Unknown Community';
      if (subCommunityElement) subCommunityElement.value = data.subCommunity || 'Unknown Sub-community';
      if (buildingElement) buildingElement.value = data.propertyName || 'Unknown Building';
      if (referenceNumberElement) referenceNumberElement.value = data.referenceNumber || 'N/A';

      // Bind the features using FontAwesome icons





      const descriptionElement = document.querySelector('.property-list p:nth-of-type(2)');
      if (descriptionElement) {
        const fullDescription = data.description;
        const previewLength = 150;
        const descriptionPreview = `${fullDescription.substring(0, previewLength)}... <a href="#" id="readMoreLink">read more</a>`;

        // Set the initial preview description
        descriptionElement.innerHTML = descriptionPreview;

        // Add event listener to the "read more" link
        const readMoreLink = document.getElementById('readMoreLink');
        readMoreLink.addEventListener('click', function (event) {
          event.preventDefault();

          // Toggle full description
          if (readMoreLink.getAttribute('data-expanded') === 'true') {
            // Collapse back to preview
            descriptionElement.innerHTML = `${fullDescription.substring(0, previewLength)}... <a href="#" id="readMoreLink">read more</a>`;
            readMoreLink.setAttribute('data-expanded', 'false');
          } else {
            // Show full description
            descriptionElement.innerHTML = `${fullDescription} <a href="#" id="readMoreLink">show less</a>`;
            readMoreLink.setAttribute('data-expanded', 'true');
          }



          // Re-add the event listener after innerHTML change
          document.getElementById('readMoreLink').addEventListener('click', arguments.callee);
        });
      }


      // Bind the listed date and report listing
      const listedDateElement = document.querySelector('.property-list p:nth-of-type(3)');
      if (listedDateElement) {
        listedDateElement.textContent = `Listed ${new Date().toLocaleDateString()} Saves 4 Report Listing`;
      }

      // Bind the features using FontAwesome icons
      const amenityIcons = {
        "Balcony": "fa-solid fa-wind",
        "Central air conditioning": "fa-solid fa-snowflake",
        "Fully fitted kitchen": "fa-solid fa-kitchen-set",
        "Pets allowed": "fa-solid fa-paw",
        "Shared swimming pool": "fa-solid fa-swimmer",
        "Near school": "fa-solid fa-school",
        "Near hospital": "fa-solid fa-hospital",
        "Near mosque": "fa-solid fa-mosque",
        "Near supermarket": "fa-solid fa-store",
        "Near mall": "fa-solid fa-shopping-cart",
        "Near public transportation": "fa-solid fa-bus",
        "Near metro": "fa-solid fa-subway",
        "Beach access": "fa-solid fa-umbrella-beach",
        "Public parks": "fa-solid fa-tree",
        "Near restaurants": "fa-solid fa-utensils",
        "Shared Gym": "fa-solid fa-dumbbell",
        // Add more mappings as needed
      };

      const featuresList = document.getElementById('amenitiesList');
      const viewAllFeaturesLink = document.getElementById('viewAllFeatures');
      const initialShowCount = 8;

      if (featuresList) {
        // Bind the features (initially show only the first 8)
        const displayedAmenities = data.amenities.slice(0, initialShowCount);
        displayedAmenities.forEach(amenity => {
          const iconClass = amenityIcons[amenity] || "fa-solid fa-question-circle";
          const listItem = document.createElement('li');
          listItem.classList.add('py-2', 'me-2'); // Apply classes
          listItem.innerHTML = `<i class="${iconClass} me-2"></i>${amenity}`;
          featuresList.appendChild(listItem);
        });

        // Handle the "View all features" link click
        viewAllFeaturesLink.addEventListener('click', function (event) {
          event.preventDefault();

          // Toggle expansion state
          if (viewAllFeaturesLink.getAttribute('data-expanded') === 'true') {
            // Collapse the list
            featuresList.innerHTML = '';
            displayedAmenities.forEach(amenity => {
              const iconClass = amenityIcons[amenity] || "fa-solid fa-question-circle";
              const listItem = document.createElement('li');
              listItem.classList.add('py-2', 'me-2');
              listItem.innerHTML = `<i class="${iconClass} me-2"></i>${amenity}`;
              featuresList.appendChild(listItem);
            });
            viewAllFeaturesLink.setAttribute('data-expanded', 'false');
            viewAllFeaturesLink.querySelector('.view-feat').textContent = 'View all features';
          } else {
            // Expand the list
            featuresList.innerHTML = '';
            data.amenities.forEach(amenity => {
              const iconClass = amenityIcons[amenity] || "fa-solid fa-question-circle";
              const listItem = document.createElement('li');
              listItem.classList.add('py-2', 'me-2');
              listItem.innerHTML = `<i class="${iconClass} me-2"></i>${amenity}`;
              featuresList.appendChild(listItem);
            });
            viewAllFeaturesLink.setAttribute('data-expanded', 'true');
            viewAllFeaturesLink.querySelector('.view-feat').textContent = 'View fewer features';
          }
        });
      }

      //---------------------------------------------------------------------

      // Bind the agent details for the main property section
      const agentImage = document.querySelector('.pro-card .card-img-top');
      if (agentImage) {
        agentImage.src = data.management.agentPhoto || "images/ico-pro.png"; // Replace with actual agent image if available
        agentImage.alt = data.management.owner || "Agent Image"; // Add alt text for better accessibility
      }

      const agentName = document.querySelector('.pro-card .card-title');
      if (agentName) {
        agentName.textContent = data.management.owner;
      }

      const agentInfo = document.querySelector('.pro-card .card-text');
      if (agentInfo) {
        agentInfo.textContent = `Agent License No: ${data.management.agentLicenseNo}`; // Replace with actual agent info if available
      }

      // Bind the "Ask a Question" section specifically
      const askQuestionSection = document.querySelector('.ask-question-card');
      if (askQuestionSection) {
        const askQuestionAgentImage = askQuestionSection.querySelector('.card-img-top');
        if (askQuestionAgentImage) {
          askQuestionAgentImage.src = data.management.agentPhoto || "images/ico-pro.png";
          askQuestionAgentImage.alt = data.management.owner || "Agent Image";
        }

        const askQuestionAgentName = askQuestionSection.querySelector('.card-title');
        if (askQuestionAgentName) {
          askQuestionAgentName.textContent = data.management.owner;
        }

        const askQuestionAgentInfo = askQuestionSection.querySelector('.card-text');
        if (askQuestionAgentInfo) {
          askQuestionAgentInfo.textContent = `Agent License No: ${data.management.agentLicenseNo}`; // Adjust this text based on actual data if needed
        }

        const askQuestionPhoneButton = askQuestionSection.querySelector('.btn.px-0.bg-transparent.shadow-none');
        if (askQuestionPhoneButton) {
          askQuestionPhoneButton.innerHTML = `<img src="images/phone-ico.svg" class="me-2" alt=""> ${data.management.agentPhone || 'Show phone number'}`;
        }
      }
    }

    // Load Property Details
    document.addEventListener('DOMContentLoaded', async function () {
      const propertyId = getQueryParam('id');

      if (propertyId) {
        try {
          // Fetching property details from Firestore
          const docRef = db.collection('propertyListings').doc(propertyId);
          const doc = await docRef.get();

          if (doc.exists) {
            const data = doc.data();
            // console.log('Firebase Response Data (JSON):', JSON.stringify(data, null, 2));

            // Bind details to the property section
            loadPropertyDetails(data);

            // Constructing the dynamic gallery HTML
            const mainImage = data.media.images[0];
            const badges = data.propertyType ? [data.propertyType] : []; // Only include propertyType as the badge

            const galleryImages = data.media.images.slice(1, 5).map((image, index) =>
              `<div class="col-6">
                <img src="${image}" class="img-fluid" alt="Image ${index + 1}">
              </div>`
            ).join('');

            const dialogImages = data.media.images.map((image, index) =>
              `<dialog id="ihc${index + 1}" class="responsive-dialog"> <!-- Add a responsive class -->
    <form method="dialog" class="d-flex flex-column justify-content-center align-items-center"> <!-- Flexbox for centering content -->
      <div class="slideID">${index + 1}/${data.media.images.length}</div>
      <img class="modal-img img-fluid" src="${image}" alt="Slide ${index + 1}"> <!-- Responsive image using img-fluid -->
      <div class="d-flex justify-content-between w-100 px-3 mt-2"> <!-- Flexbox for button alignment -->
        ${index > 0 ? `<button onclick="document.getElementById('ihc${index}').showModal()" class="prev btn btn-secondary" aria-label="move to previous image">&lt;</button>` : ''}
        ${index < data.media.images.length - 1 ? `<button onclick="document.getElementById('ihc${index + 2}').showModal()" class="next btn btn-secondary" aria-label="move to next image">&gt;</button>` : ''}
      </div>
      <button class="close btn btn-danger mt-2" aria-label="close popup image">X</button> <!-- Ensure the close button is responsive -->
    </form>
  </dialog>`
            ).join('');

            // Custom styles for better responsive behavior
            const styles = `
  <style>
    dialog.responsive-dialog {
      width: 80%;
      max-width: 600px; /* Limit dialog size on larger screens */
      margin: auto;
      border: none;
      border-radius: 8px;
      padding: 0;
      overflow: hidden;
    }

    @media (max-width: 768px) {
      dialog.responsive-dialog {
        width: 90%; /* Increase dialog width on small screens */
        max-width: 90%;
      }
      .modal-img {
        width: 100%; /* Make images responsive */
        height: auto;
      }
      button {
        font-size: 1rem; /* Ensure buttons are easy to click on small screens */
      }
    }

    .modal-img {
      max-height: 400px; /* Prevent images from overflowing */
      width: 100%;
      object-fit: contain; /* Make images scale properly */
    }

    button.prev, button.next {
      background-color: #333;
      color: white;
      border: none;
      padding: 10px;
      cursor: pointer;
    }

    button.close {
      background-color: #f00;
      color: white;
      border: none;
      padding: 10px;
      cursor: pointer;
    }

    .slideID {
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 10px;
    }
  </style>
`;

            document.head.insertAdjacentHTML('beforeend', styles);


            const propertyGallery = `
              <div class="container">
                <div class="row g-2 mt-4 mt-lg-5">
                  <div class="col-12 col-md-6 position-relative m-0 card-villa">
                    <span class="itm-badge1 px-3 py-2 position-absolute">
                      ${badges.map(badge => badge ? `<span class="badge itm-badge rounded-2 px-3 py-2 me-2">${badge}</span>` : '').join('')}
                    </span>
                    <img src="${mainImage}" class="object-fit-100" onclick="document.getElementById('ihc1').showModal()" alt="Main Image">
                    <div class="col position-absolute videos-galary-btn d-flex">
                      <button class="btn px-2 me-2 bg-light btn-vdo"><img src="images/fav-ico.svg" class="me-1" alt=""> Save</button>
                      <button class="btn bg-light btn-vdo"><img src="images/share-ico.svg" class="me-1" alt=""> Share</button>
                    </div>
                  </div>
                  <div class="col-12 col-md-6">
                    <div class="row g-2">
                      ${galleryImages}
                    </div>
                  </div>
                </div>
              </div>
              ${dialogImages}`;

            document.getElementById('property-gallery').innerHTML = propertyGallery;

          } else {
            console.log("No such document!");
          }
        } catch (error) {
          console.error("Error fetching property details: ", error);
        }
      } else {
        console.error("No property ID provided in URL.");
      }
    });

    document.addEventListener('DOMContentLoaded', async function () {
      const propertyId = getQueryParam('id');

      if (propertyId) {
        try {
          const docRef = db.collection('propertyListings').doc(propertyId);
          const doc = await docRef.get();

          if (doc.exists) {
            const data = doc.data();
            //console.log('Firebase Response Data (JSON):', JSON.stringify(data, null, 2));

            // Function to load modal content
            function loadModalContent() {
              // Load Photos into the Photos Modal
              const photosCarousel = document.querySelector('#photosCarousel .carousel-inner');
              photosCarousel.innerHTML = data.media.images.map((image, index) => `
            <div class="carousel-item ${index === 0 ? 'active' : ''}">
              <img src="${image}" class="d-block w-100" alt="Property Image ${index + 1}">
            </div>
          `).join('');

              // Load Floor Plan into the Floor Plan Modal
              const floorPlanImage = document.getElementById('floorPlanImage');
              floorPlanImage.src = data.media.floorPlan || 'images/fallback-floor-plan.png'; // Fallback image if floor plan is not available

              // Load Video into the Videos Modal
              const videoPlayer = document.getElementById('videoPlayer');
              videoPlayer.src = data.media.video || ''; // Use video URL from Firebase data

              // Load Map into the Map Modal
              const mapIframe = document.getElementById('mapIframe');
              mapIframe.src = `https://maps.google.com/maps?q=${data.location.geoPoint.lat},${data.location.geoPoint.lng}&z=15&output=embed`;
            }

            // Bind details to the property section
            loadPropertyDetails(data);
            loadModalContent(); // Call this to load modal content
          } else {
            console.log('No such document!');
          }
        } catch (error) {
          console.error('Error fetching property details: ', error);
        }
      } else {
        console.error('No property ID provided in URL.');
      }
    });

  </script>




  <!-- for loading cards of all data -->

  <script>


    function bindLocationData(data) {
      // Bind community and subCommunity to the paragraph
      const locationDescription = `${data.community}, ${data.subCommunity}`;
      document.querySelector('.map-font-p').textContent = locationDescription;

      /*// Update the Google Maps iframe with the geoPoint coordinates
      const lat = data.location.geoPoint.lat;
      const lng = data.location.geoPoint.lng;
      const googleMapUrl = `https://www.google.com/maps/embed/v1/place?key=AIzaSyCvfYNuZy5x4nYFZI0t3rCY6ePdU2ss9nk&q=${lat},${lng}&zoom=15`;

      const iframe = document.getElementById('googleMapIframe');
      iframe.src = googleMapUrl;*/

      // Update the Google Maps iframe with the geoPoint coordinates and satellite view
      const lat = data.location.geoPoint.lat;
      const lng = data.location.geoPoint.lng;
      const googleMapUrl = `https://www.google.com/maps/embed/v1/place?key=AIzaSyCvfYNuZy5x4nYFZI0t3rCY6ePdU2ss9nk&q=${lat},${lng}&zoom=15&maptype=satellite`;

      const iframe = document.getElementById('googleMapIframe');
      iframe.src = googleMapUrl;



      // Optionally update the "See on Google map" link
      const mapLink = document.getElementById('googleMapLink');
      mapLink.href = `https://www.google.com/maps/search/?api=1&query=${lat},${lng}`;

      // Optionally update the "View more listings in this area" link
      const viewMoreListingsLink = document.getElementById('viewMoreListingsLink');
      viewMoreListingsLink.href = `property-listing.html?community=${encodeURIComponent(data.community)}`;
    }

    // Call this function after you fetch the property details from Firebase
    document.addEventListener('DOMContentLoaded', async function () {
      const propertyId = getQueryParam('id');

      if (propertyId) {
        try {
          const docRef = db.collection('propertyListings').doc(propertyId);
          const doc = await docRef.get();

          if (doc.exists) {
            const data = doc.data();
            //console.log('Firebase Response Data (JSON):', JSON.stringify(data, null, 2));

            // Bind property details to the page
            loadPropertyDetails(data);

            // Bind the location data to the map and description
            bindLocationData(data);
          } else {
            console.log("No such document!");
          }
        } catch (error) {
          console.error("Error fetching property details: ", error);
        }
      } else {
        console.error("No property ID provided in URL.");
      }
    });





  </script>


  <script>
    function loadMajorCommunities(propertiesSnapshot) {
      const carousel = document.querySelector('.owl-carousel');
      let carouselItems = '';

      propertiesSnapshot.forEach(doc => {
        const property = doc.data();
        const propertyId = doc.id;

        const cardHtml = `
      <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-4 unique-card">
        <div class="card h-100 row">
          <img src="${property.media.images[0]}" class="card-img-top" alt="${property.title}" style="object-fit: cover; height: 200px;">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">${property.title}</h5>
            <p class="card-text">AED ${property.pricing.price.toLocaleString()}</p>
            <p class="card-text">${property.bedrooms} Beds • ${property.bathrooms} Baths • ${property.size.toLocaleString()} sq. ft</p>
            <div class="mt-auto text-center">
              <a href="project-details-page.html?id=${propertyId}" class="btn rounded-0 py-lg-3 px-4 hover-btn check-primary-btn ripple-surface w-50 mx-auto">Learn More</a>
            </div>
          </div>
        </div>
      </div>`;
        carouselItems += cardHtml;
      });

      // Inject items into the carousel container
      carousel.innerHTML = carouselItems;

      // Initialize Owl Carousel after the HTML content is loaded
      $(carousel).owlCarousel({
        loop: false,
        margin: 10,
        nav: true,
        dots: false,
        items: 3,
        responsive: {
          0: { items: 1 },
          600: { items: 2 },
          1000: { items: 3 }
        },
        navText: ['<i class="fas fa-chevron-left"></i>', '<i class="fas fa-chevron-right"></i>']
      });
    }

    // Load Major Communities Carousel
    $(document).ready(async function () {
      try {
        const propertiesSnapshot = await db.collection('propertyListings').get();
        const properties = propertiesSnapshot.docs;
        loadMajorCommunities(properties);
      } catch (error) {
        console.error("Error fetching property details for Major Communities: ", error);
      }
    });

  </script>

  <style>
    /* Styles for the unique card layout */
    .unique-card .card {
      width: 400px;
      /* Set a fixed width for all cards */
      height: 430px;
      /* Set a fixed height for all cards */
      display: flex;
      flex-direction: column;
    }

    .unique-card .card-img-top {
      height: 200px;
      /* Set a fixed height for the image */
      object-fit: cover;
      /* Ensure the image scales and crops to fit within the fixed height */
      width: 100%;
      /* Make sure the image takes the full width of the card */
    }

    .unique-card .card-body {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
  </style>


  <!-- Dynamic dropdown  UAE scripts -->
  <script>
    document.addEventListener('DOMContentLoaded', async function () {
      try {
        // Step 1: Fetch and aggregate community data
        const communities = {};

        const querySnapshot = await db.collection('propertyListings').get();
        querySnapshot.forEach((doc) => {
          const data = doc.data();
          const community = data.community;
          if (community) {
            if (!communities[community]) {
              communities[community] = 0;
            }
            communities[community]++;
          }
        });

        // console.log("Aggregated Communities Data:", communities);

        // Step 2: Sort communities by the number of listings
        const sortedCommunities = Object.entries(communities).sort((a, b) => b[1] - a[1]);

        console.log("Sorted Communities:", sortedCommunities);

        // Step 3: Generate the dropdown content
        const uaeDropdownContainer = document.querySelector('#navbarDropdown + .dropdown-menu .row');

        if (uaeDropdownContainer) {
          // console.log("UAE Dropdown Container found:", uaeDropdownContainer);

          let dropdownItems = '<div class="col-12 col-md-6 col-lg-3"><h5 class="my-2">Communities</h5></div>';

          // Insert empty rows for the second, third, and fourth columns first
          dropdownItems += `
            <div class="col-12 col-md-6 col-lg-3"><li style="visibility: hidden;">&nbsp;</li></div>
            <div class="col-12 col-md-6 col-lg-3"><li style="visibility: hidden;">&nbsp;</li></div>
            <div class="col-12 col-md-6 col-lg-3"><li style="visibility: hidden;">&nbsp;</li></div>`;

          // Now add the community entries, 4 per row
          sortedCommunities.forEach((community, index) => {
            const [communityName, listingCount] = community;

            // Add community to the respective column
            dropdownItems += `<div class="col-12 col-md-6 col-lg-3"><li><a href="property-listing.html?community=${encodeURIComponent(communityName)}">${communityName} (${listingCount})</a></li></div>`;
          });

          // console.log("Generated Dropdown HTML:", dropdownItems);

          // Step 4: Inject the content into the DOM
          uaeDropdownContainer.insertAdjacentHTML('beforeend', dropdownItems);
          console.log("Dropdown HTML inserted successfully.");
        } else {
          console.log("UAE dropdown container not found.");
        }

        // Ensure the footer functionality remains intact
        const topAreasContainer = document.querySelector('.row-cols-lg-5');

        if (topAreasContainer) {
          let footerItems = '<div class="col"><h3 class="my-4">Top Areas</h3><ul class="p-0">';

          sortedCommunities.slice(0, 4).forEach(([communityName, listingCount]) => {
            footerItems += `<li class="mb-1 mb-lg-2"><a href="property-listing.html?community=${encodeURIComponent(communityName)}">${communityName} (${listingCount})</a></li>`;
          });

          footerItems += '</ul></div>';

          console.log("Generated Footer HTML:", footerItems);

          topAreasContainer.insertAdjacentHTML('beforeend', footerItems);
          console.log("Footer HTML inserted successfully.");
        } else {
          console.log("Footer container not found.");
        }

      } catch (error) {
        console.error('Error fetching community data:', error);
      }
    });

  </script>


</body>

</html>